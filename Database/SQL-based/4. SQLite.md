# SQLite

* **SQLite** là một hệ quản trị cơ sở dữ liệu quan hệ (RDBMS) gọn nhẹ, **nhúng trực tiếp** vào ứng dụng (serverless).
* Không cần chạy dịch vụ (daemon) riêng, toàn bộ dữ liệu nằm trong **một file duy nhất** (`.sqlite`, `.db`).
* Được sử dụng cực kỳ phổ biến trong:

  * **Ứng dụng mobile** (Android, iOS).
  * **Trình duyệt web** (Chrome, Firefox, Edge).
  * **Ứng dụng desktop** (VSCode, Skype).
  * **IoT / nhúng** (các thiết bị cần database nhưng tài nguyên hạn chế).
# 1. Kiến trúc SQLite

SQLite khác với MySQL/MariaDB vì **không có server riêng**.

1. **SQL Layer**

   * Parser & Virtual Machine (phân tích SQL, biên dịch thành bytecode).
   * Optimizer (tối ưu query).

2. **Storage Engine**

   * Dữ liệu lưu trong một file nhị phân duy nhất.
   * Cấu trúc file gồm **pages** để quản lý bảng, index, record.
   * Hỗ trợ **transactions (ACID)**, nhưng concurrency hạn chế (1 writer, nhiều reader).

> Ưu điểm: cực kỳ đơn giản, dễ triển khai.
> Nhược điểm: không phù hợp cho hệ thống multi-user hoặc web traffic lớn.

# 2. Database mặc định trong SQLite (quan trọng cho Pentest)

Không có nhiều DB hệ thống như MySQL/MariaDB. SQLite chỉ có **các bảng hệ thống trong `sqlite_master`** để lưu metadata.

* **`sqlite_master`** → lưu thông tin schema (bảng, index, trigger, view).
* **`sqlite_temp_master`** → metadata cho bảng tạm (temporary tables).

Ví dụ pentest:

```sql
-- Liệt kê tất cả bảng trong DB
SELECT name, type FROM sqlite_master WHERE type='table';

-- Lấy cấu trúc bảng
SELECT sql FROM sqlite_master WHERE name='users';
```
# 3. Câu lệnh cơ bản (dùng cho Website & Pentest)

### Liệt kê bảng:

```sql
.tables
-- hoặc
SELECT name FROM sqlite_master WHERE type='table';
```

### Liệt kê cột trong bảng:

```sql
PRAGMA table_info(users);
```

### Dump dữ liệu (ví dụ lấy user/pass):

```sql
SELECT username, password FROM users;
```

### Tạo bảng & chèn dữ liệu:

```sql
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT NOT NULL,
    password TEXT
);

INSERT INTO users (username, password)
VALUES ('admin', '123456');
```

# 4. Ứng dụng SQLite trong Website / App

* **Mobile app**: Android (SQLite built-in), iOS app.
* **Trình duyệt web**:

  * Chrome/Firefox lưu **cookies, history, saved logins** trong file SQLite.
  * Ví dụ file `cookies.sqlite` hoặc `places.sqlite`.
* **Ứng dụng desktop**: VSCode, Skype, Discord dùng SQLite lưu cấu hình.
* **Website nhỏ**: Flask/Django (Python), Rails (Ruby) thường dùng SQLite cho dev/test (production thì dùng MySQL/PostgreSQL).
* **IoT / Embedded systems**: vì nhẹ và gọn.

# 5. Bảo mật & Lỗ hổng thường gặp

* **SQL Injection (SQLi)** → vẫn khai thác được như MySQL/MariaDB (vì hỗ trợ chuẩn SQL).
* **Local File Access** → vì DB chỉ là file (`.sqlite`), nếu attacker đọc được file → toàn bộ dữ liệu lộ.
* **Weak encryption** → SQLite mặc định không mã hóa, cần dùng **SEE (SQLite Encryption Extension)** hoặc các bản fork (SQLCipher).
* **Data remnants** → dữ liệu xóa trong SQLite file có thể **forensic recovery**.
* **Schema disclosure** → dễ dàng truy vấn `sqlite_master` để lộ toàn bộ schema.
# 6. danh sách câu lệnh.
- https://sqlite.org/cli.html
- https://www.sqlitetutorial.net/sqlite-cheat-sheet/

