# DynamoDB (AWS)

## 1. Tổng quan

* **DynamoDB** là dịch vụ cơ sở dữ liệu NoSQL **hoàn toàn quản lý bởi AWS**.
* Thuộc loại **key-value** và **document-oriented** (hỗ trợ JSON).
* Tự động **scaling** (mở rộng / thu hẹp theo tải), **HA** (high availability), và **multi-region replication**.
* Phù hợp cho ứng dụng cần **low latency (<10ms)** và **tốc độ cao**.
## 2. Kiến trúc

* **Table**: Không có schema cứng (chỉ cần khai báo **Primary Key**).
* **Primary Key** có 2 dạng:

  * **Partition key** (hash key).
  * **Partition key + Sort key** (hash + range key).
* **Item**: bản ghi trong table, lưu trữ dạng **JSON** (gồm attributes).
* **Attribute**: thuộc tính của item (có thể là scalar, set, list, map).
* **Index**:

  * **GSI (Global Secondary Index)**: cho phép query bằng thuộc tính khác ngoài PK.
  * **LSI (Local Secondary Index)**: dựa trên cùng partition key nhưng sort key khác.
* **Throughput mode**:

  * **Provisioned**: đặt sẵn RCU (Read Capacity Unit) và WCU (Write Capacity Unit).
  * **On-demand**: tự scale theo tải.
## 3. CSDL / Table mặc định

* DynamoDB **không có DB mặc định** như MySQL/PostgreSQL.
* Người dùng tạo **table** trực tiếp trong AWS Console hoặc CLI.

Ví dụ:

```bash
aws dynamodb create-table \
  --table-name Users \
  --attribute-definitions \
      AttributeName=UserId,AttributeType=S \
  --key-schema \
      AttributeName=UserId,KeyType=HASH \
  --billing-mode PAY_PER_REQUEST
```
## 4. Câu lệnh cơ bản (API/CLI)

* **Thêm Item**:

```bash
aws dynamodb put-item \
  --table-name Users \
  --item '{"UserId": {"S": "U1"}, "Name": {"S": "Alice"}}'
```

* **Lấy Item theo PK**:

```bash
aws dynamodb get-item \
  --table-name Users \
  --key '{"UserId": {"S": "U1"}}'
```

* **Query (theo PK + điều kiện Sort Key hoặc Index)**:

```bash
aws dynamodb query \
  --table-name Users \
  --key-condition-expression "UserId = :id" \
  --expression-attribute-values '{":id":{"S":"U1"}}'
```

* **Scan (toàn bộ bảng)**:

```bash
aws dynamodb scan --table-name Users
```
## 5. Ứng dụng thực tế

* **E-commerce**: giỏ hàng, catalog sản phẩm, session store.
* **Gaming**: leaderboard, dữ liệu người chơi real-time.
* **IoT**: lưu trữ dữ liệu sensor tốc độ cao.
* **Mobile / Web App**: backend serverless (kết hợp AWS Lambda + API Gateway).
* **ML/Analytics**: làm nguồn dữ liệu cho Kinesis / Athena.
## 6. Bảo mật

* **Authentication**: qua **AWS IAM Role/Policy** (không có username/password trực tiếp).
* **Encryption**: mặc định mã hóa **AES-256 (KMS)**.
* **Network**: có thể chạy trong **VPC endpoint**, tránh Internet exposure.
* **Access Control**:

  * IAM policy theo user/role.
  * Fine-grained access control (FGAC) theo attribute-level.
* **Logging & Monitoring**: CloudWatch, CloudTrail.
## 7. danh sách câu lệnh.
- https://docs.aws.amazon.com/cli/latest/reference/dynamodb/
- https://dynobase.dev/dynamodb-cli-query-examples/
- https://kysuit.net/aws/dynamodb/dynamodb-cli-commands-and-query/
