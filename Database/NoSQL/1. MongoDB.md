# MongoDB


## 1.1. Tổng quan

* **MongoDB** là **NoSQL Database** dạng **document-oriented**, lưu dữ liệu theo cấu trúc **BSON (Binary JSON)**.
* Được phát triển bởi **MongoDB Inc.**, mã nguồn mở.
* Điểm mạnh: **scalability (mở rộng dễ dàng), flexible schema (không cần schema cứng nhắc), high availability**.
* Thường dùng trong **ứng dụng web real-time**, **big data**, **IoT**, **machine learning pipelines**.

## 1.2. Kiến trúc

* **Document** → tương tự một bản ghi (record), lưu dưới dạng JSON/BSON.
* **Collection** → tập hợp nhiều document (giống table trong SQL).
* **Database** → tập hợp nhiều collection.
* **Replica Set** → nhóm nhiều MongoDB server để đảm bảo **High Availability**.
* **Sharding** → chia nhỏ dữ liệu trên nhiều node để scale-out (phân tán dữ liệu).
  
## 1.3. Database mặc định

* **admin** → giống `master` trong SQL, chứa quyền quản trị.
* **local** → lưu trữ thông tin replication, chỉ tồn tại trên local node.
* **config** → lưu thông tin sharding và cluster.

## 1.4. Câu lệnh cơ bản

| Nhóm            | MongoDB Shell / mongosh                               | Tương tự SQL                                  |
| --------------- | ----------------------------------------------------- | --------------------------------------------- |
| Tạo DB          | `use mydb`                                            | `CREATE DATABASE mydb;`                       |
| Xem DBs         | `show dbs`                                            | `SHOW DATABASES;`                             |
| Tạo collection  | `db.createCollection("users")`                        | `CREATE TABLE users (...);`                   |
| Xem collections | `show collections`                                    | `SHOW TABLES;`                                |
| Insert          | `db.users.insertOne({name: "Alice", age: 25})`        | `INSERT INTO users ...`                       |
| Select          | `db.users.find({age: 25})`                            | `SELECT * FROM users WHERE age=25;`           |
| Update          | `db.users.updateOne({name:"Alice"}, {$set:{age:26}})` | `UPDATE users SET age=26 WHERE name='Alice';` |
| Delete          | `db.users.deleteOne({name:"Alice"})`                  | `DELETE FROM users WHERE name='Alice';`       |
| Index           | `db.users.createIndex({name:1})`                      | `CREATE INDEX idx_name ON users(name);`       |

## 1.5. Ứng dụng thực tế

* **E-commerce**: lưu catalog sản phẩm có nhiều thuộc tính khác nhau (giá, màu, size).
* **Social Network**: lưu bài viết, comment, reaction (nested document).
* **IoT**: lưu dữ liệu cảm biến real-time.
* **Machine Learning**: lưu dữ liệu huấn luyện dạng JSON, dễ truy vấn.
  
## 1.6. Bảo mật

* **Authentication**: SCRAM-SHA-1, SCRAM-SHA-256, LDAP, Kerberos.
* **Authorization**: Role-Based Access Control (RBAC).
* **Encryption**: hỗ trợ **TLS/SSL**, **Encryption at rest**.
* **Auditing**: ghi log các hoạt động truy cập.

