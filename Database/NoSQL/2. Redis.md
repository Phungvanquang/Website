# Redis


## 1. Tổng quan

Redis (Remote Dictionary Server) là một **cơ sở dữ liệu NoSQL dạng in-memory** (lưu trong RAM) với tốc độ cực nhanh, thường dùng làm cache, message broker, hoặc session store. Redis hỗ trợ nhiều kiểu dữ liệu: String, List, Set, Sorted Set, Hash, Bitmap, HyperLogLog và Stream.

* Tốc độ truy cập \~ micro giây (do in-memory).
* Hỗ trợ persistence (lưu xuống đĩa) nhưng mặc định dữ liệu chính nằm trong RAM.
* Được sử dụng rộng rãi trong các hệ thống có yêu cầu hiệu năng cao (Facebook, Twitter, GitHub, StackOverflow).
## 2. Kiến trúc

Redis có kiến trúc đơn giản nhưng tối ưu:

* **Client – Server**: client gửi lệnh qua TCP, server xử lý và trả kết quả.
* **In-memory storage**: dữ liệu lưu trong RAM, cho tốc độ cực nhanh.
* **Persistence**: 2 cơ chế lưu trữ

  * **RDB (Redis Database Snapshot)** → snapshot toàn bộ dữ liệu tại thời điểm.
  * **AOF (Append Only File)** → ghi log các lệnh để có thể khôi phục.
* **Replication**: hỗ trợ master-slave (primary-replica).
* **Cluster mode**: phân mảnh dữ liệu theo hash slots để scale-out.
* **Pub/Sub**: Redis có built-in message queue để publish/subscribe giữa client.
## 3. DB mặc định

* Redis mặc định cung cấp **16 databases** (đánh số từ 0 đến 15).
* DB mặc định là **DB số 0**.
* Có thể chuyển DB bằng lệnh:

  ```bash
  SELECT 2   # chuyển sang DB số 2
  ```
## 4. Câu lệnh cơ bản

Một số lệnh Redis quan trọng:

* **String**

  ```bash
  SET key "value"      # lưu giá trị
  GET key              # lấy giá trị
  INCR counter         # tăng biến đếm
  ```

* **List**

  ```bash
  LPUSH list a         # thêm vào đầu
  RPUSH list b         # thêm vào cuối
  LPOP list            # lấy và xóa phần tử đầu
  ```

* **Set**

  ```bash
  SADD myset a b c     # thêm vào set
  SMEMBERS myset       # liệt kê toàn bộ phần tử
  ```

* **Hash**

  ```bash
  HSET user:1 name "Alice" age 25
  HGET user:1 name
  ```

* **Pub/Sub**

  ```bash
  SUBSCRIBE channel
  PUBLISH channel "Hello"
  ```
## 5. Ứng dụng

Redis thường được ứng dụng trong:

* **Cache layer**: tăng tốc truy xuất dữ liệu (giảm tải DB truyền thống).
* **Session store**: lưu session cho web app, thường dùng với Nginx, Django, Spring.
* **Message Queue**: dùng Pub/Sub hoặc Stream để xử lý sự kiện.
* **Real-time analytics**: đếm view, tracking, ranking (dùng Sorted Set).
* **Leaderboards**: bảng xếp hạng game hoặc ứng dụng.

## 6. Bảo mật

Redis mặc định không an toàn nếu để public. Cần cấu hình:

* **Bind IP**: chỉ cho phép kết nối từ localhost hoặc private IP.
* **Password authentication**: trong redis.conf

  ```conf
  requirepass yourpassword
  ```
* **TLS encryption**: bật SSL/TLS cho Redis server.
* **Disable dangerous commands**: như FLUSHALL, CONFIG bằng rename hoặc disable.
* **Tường lửa/iptables**: chặn port 6379 từ bên ngoài.
## 6. danh sách câu lệnh.
- https://redis.io/docs/latest/commands/
- https://www.geeksforgeeks.org/system-design/complete-guide-to-redis-commands/
- https://redis-stack.io/commands/
